# This image doesn't use Alpine as the base, so we are going to reference the gearbox-base container indirectly.

# 1. First reference the gearbox-base image.
FROM gearboxworks/gearbox-base:alpine-3.4 as gearbox-base

# 2. Now copy the local files specific to this container.
COPY build /build
COPY container.json /build/container.json

# 3. Set up env variables.
MAINTAINER Gearbox Team <team@gearbox.works>
ENV GEARBOX_CONTAINER_NAME "docker-mailhog"
ENV GEARBOX_CONTAINER_VERSION "1.0.0"

# 4. Run the build-base.sh script to set everything up.
RUN /bin/sh /build/build-base.sh

# 5. Run the build-mailhog.sh script to set everything up.
RUN /bin/sh /build/build-mailhog.sh

# 6. Expose ports.
EXPOSE 8025 1025 9970
WORKDIR /project/www
CMD ["MailHog"]
# ENTRYPOINT ["MailHog"]

